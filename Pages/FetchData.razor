@page "/cryptocurrencies"

<PageTitle>Cryptocurrencies</PageTitle>

@using CIP.Website.Data
@using CIP.Website.Data.Interfaces;
@using CIP.Website.Data.Models;
@using CIP.Website.Data.Services;
@using MudBlazor;
@inject ICryptocurrency cryptocurrency

<style>
    .thead-dark {
        background-color: #020927;
        color: white;
    }

    .row-on-hover:hover {
        cursor: pointer;
        background-color: #DCDCDC;
    }
</style>

<MudTable Items="@_cryptocurrencies" FixedHeader="@_fixedHeader" Height="@("400px")">
    <HeaderContent>
        <MudTh>Rank</MudTh>
        <MudTh>Name</MudTh>
        <MudTh>Coin Valuation</MudTh>
        <MudTh>Market Cap</MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd DataLabel="Rank">@context.Rank</MudTd>
        <MudTd DataLabel="Name">@context.Name</MudTd>
        <MudTd DataLabel="Valuation">@context.USDValuation</MudTd>
        <MudTd DataLabel="Market Cap">@context.MarketCap</MudTd>
    </RowTemplate>
    <FooterContent>
        <MudTd>Rank</MudTd>
        <MudTd>Name</MudTd>
        <MudTd>Coin Valuation</MudTd>
        <MudTd>Market Cap</MudTd>
    </FooterContent>
    <PagerContent>
        <MudTablePager PageSizeOptions="new int[]{50, 100}" />
    </PagerContent>
</MudTable>



@code {
    private bool _fixedHeader = true;
    private IEnumerable<Cryptocurrency> _cryptocurrencies = Enumerable.Empty<Cryptocurrency>();

    protected override async Task OnInitializedAsync()
    {
        _cryptocurrencies = await cryptocurrency.Get();
    }
}
